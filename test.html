<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>å‹•ç”»æƒ…å ±ãƒ†ã‚¹ãƒˆ</title>
  <style>
    body { font-family: sans-serif; padding: 2em; }
    input { width: 400px; }
    video { margin-top: 20px; max-width: 100%; }
  </style>
</head>
<body>
  <h2>ğŸ¬ å‹•ç”»æƒ…å ±å–å¾—ãƒ†ã‚¹ãƒˆ</h2>
  <label>å‹•ç”»IDï¼š<input id="videoIdInput" type="text" placeholder="ä¾‹: abcd-efgh-1234..."></label>
  <button onclick="loadVideo()">æƒ…å ±å–å¾—</button>

  <div id="result" style="margin-top:1.5em;"></div>
  <video id="videoPlayer" controls></video>

  <script>
    const SERVER = "https://pikko-videos-data.loca.lt"; // â† ã“ã“ã‚’å¿…è¦ã«å¿œã˜ã¦å¤‰æ›´

    async function loadVideo() {
      const id = document.getElementById('videoIdInput').value;
      if (!id) return alert('å‹•ç”»IDã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');

      try {
        const res = await fetch(`${SERVER}/videoInfo/${id}`);
        if (!res.ok) throw new Error('æƒ…å ±å–å¾—å¤±æ•—');

        const info = await res.json();
        document.getElementById('result').innerHTML = `
          <strong>ã‚¿ã‚¤ãƒˆãƒ«ï¼š</strong> ${info.title}<br>
          <strong>æŠ•ç¨¿è€…ï¼š</strong> ${info.username}<br>
          <strong>URLï¼š</strong> <a href="${info.url}" target="_blank">${info.url}</a>
        `;

        const player = document.getElementById('videoPlayer');
        player.src = info.url;
        player.load();
      } catch (e) {
        document.getElementById('result').innerHTML = `<span style="color:red;">ã‚¨ãƒ©ãƒ¼ï¼š${e.message}</span>`;
        document.getElementById('videoPlayer').src = '';
      }
    }
  </script>
</body>
</html>